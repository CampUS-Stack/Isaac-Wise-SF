<!--
 - Created by Kritik Garg on 16-02-2020.
 -->

<aura:component description="TicketComments" controller="TicketCommentController"
                implements="flexipage:availableForRecordHome,force:hasRecordId" access="global">

    <aura:attribute name="comments" type="List"/>
    <aura:attribute name="newComment" type="String"/>
    <aura:attribute name="recordId" type="String"/>

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <article class="slds-card">

        <div class="slds-card__header slds-grid">
            <p style="font-size: large; font-weight: bold;">Comments</p>
        </div>

        <div class="slds-card__body slds-card__body_inner">
            <div class="slds-feed">
                <ul class="slds-feed__list">
                    <li class="slds-feed__item">

                        <aura:iteration items="{!v.comments}" var="com">
                            <article class="slds-post">
                                <header class="slds-post__header slds-media">
                                    <div class="slds-media__figure">
                                        <a href="javascript:void(0);"
                                           class="slds-avatar slds-avatar_circle slds-avatar_medium">
                                            <lightning:icon iconName="standard:avatar" size="small"/>
                                        </a>
                                    </div>
                                    <div class="slds-media__body">
                                        <div class="slds-grid slds-grid_align-spread slds-has-flexi-truncate">
                                            <p>
                                                <a href="javascript:void(0);" title="{!com.UserName}">{!com.UserName}</a>
                                            </p>
                                            <lightning:buttonIcon iconName="utility:down" size="x-small"
                                                                  alternativeText="More Options"/>
                                        </div>
                                        <p class="slds-text-body_small">
                                            <a href="javascript:void(0);"
                                               title="Last Modified Date"
                                               class="slds-text-link_reset">

                                                <lightning:formattedDateTime value="{!com.comment.LastModifiedDate}"
                                                                             month="short" day="2-digit" year="numeric" hour="2-digit"
                                                                             minute="2-digit" timeZone="America/New_York" timeZoneName="short"
                                                                             weekday="long"/>

                                            </a>
                                        </p>
                                    </div>
                                </header>
                                <div class="slds-post__content slds-text-longform">
<!--                                    <p>{!com.comment.Comment__c}</p>-->
                                    <ui:outputRichText value="{!com.comment.Comment__c}"/>

                                </div>
                                <footer class="slds-post__footer">

                                </footer>
                            </article>
                        </aura:iteration>
                    </li>
                </ul>
                <lightning:inputRichText value="{!v.newComment}" class="myform" placeholder="Write a commentâ€¦"/>

                <div class="slds-p-vertical_xx-small slds-p-around_xx-small">
                    <div style="height:24px;">
                        <lightning:button variant="brand" class="slds-float--right"
                                         onclick="{!c.validateAndPostNewComment}" label="Post Comment"/>
                    </div>
                </div>
            </div>

            <div>

            </div>
        </div>
    </article>
</aura:component>